# 计网面试题

收录我遇到的计网面试题。

PS：个人见解，不保证正确。

## GET 和 POST 区别

* GET是从服务器获取资源；GET是幂等的
* POST是提交数据到服务器

## 说说TCP三次握手的过程

1. 服务器和客户端都关闭（CLOSED）
2. 服务器被动监听（LISTEND）
3. 客户端发送 SYN 包，（SYN-SEND）
4. 服务器返回 SYN ACK（SYN-RECV）
5. 客户端发送 ACK（ESTABLISHED）
6. 服务器收到 ACK（ESTABLISHED）


## 说说拥塞控制过程

* 主要是通过滑动窗口来实现的
* 通过慢开始、拥塞避免、快速重传和快速恢复等算法来改变窗口大小
* 记当前窗口大小为 `cwnd`，阈值为 `ssthresh`

1. 一开始，`cwnd=1`，执行**慢开始**，窗口大小以指数级增加，即 `cwnd=2*cwnd`
2. 当 `cwnd` 达到 `ssthresh`，执行**拥塞避免**，窗口大小线性增加，即 `cwnd=cwnd+1`
3. 这个过程中，如果遇到 3-ACK（收到3次对相同的包的确认），就**快速重传**丢失的报文，并设置 `cwnd=cwnd/2; ssthresh = cwnd`
4. 这个过程中，如果遇到 Timeout，就认为网络很堵了，设置 `cwnd=1`


## 说说TCP的四次挥手过程

1. 一开始，服务器和客户端都处于连接建立状态（ESTABLISHED）
2. 客户端发送 FIN（FIN_WAIT_1）
3. 服务器收到后，发送 ACK （CLOSE_WAIT）
4. 客户端收到后，等待服务器发送数据（FIN_WAIT_2）
5. 服务器发送一些关闭连接需要的数据后，发送 FIN ACK（LAST_ACK）
6. 客户端发送最后的 ACK ，等待 2 个 MSL （TIME WAIT）
7. 服务器收到 ACK 后关闭（CLOSED）
8. 客户端等待 2 个 MSL 后关闭（CLOSED）

## TCP连接可以两次握手吗

不行。考虑一种场景：

1. 客户端发送 SYN 包，由于某种原因，SYN 包（记作旧 SYN 包）在某个网络结点滞留许久
2. 客户端许久未收到 ACK 包，重传 SYN 包
3. 经过握手之后，成功建立 TCP 连接
4. 旧 SYN 包到达服务器，服务器如何解决？

* 如果是两次握手，在服务器发送 ACK 包给客户端之后，握手过程就结束了。
* 服务器会为旧 SYN 包建立连接（无效连接），浪费服务器资源。

